<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
    PUBLIC "-//ibatis.apache.org//DTD Mapper 3.0//EN"
    "http://ibatis.apache.org/dtd/ibatis-3-mapper.dtd">
<mapper namespace="{pkg}.demo.dao.DemoAssociationDao">
	
	<sql id="conditionSql">
		<where>
			<if test="status != null and status != ''">
				AND status like #{status}
			</if>
		</where>
	</sql>
	
	<select id="findByCondition" resultType="demoAssociation">
		select * from demo_association
		<include refid="conditionSql" />
	</select>

	<select id="countByCondition" resultType="long">
		select count(1) from demo_association
		<include refid="conditionSql" />
	</select>

	<delete id="deleteIds">
		<if test="ids != null">
			delete from demo_association where id in
			<foreach item="id" collection="ids" open="(" separator="," close=")">#{id}</foreach>
		</if>
	</delete>
	
	<delete id="deleteByDemoId" parameterType="long">
		delete from demo_association where demo_id = #{demoid}
	</delete>

</mapper>